#!/usr/bin/python
import json
import traceback
import logging
import sys
from rightscale import get_connection

logging.info("Listing datacenters with parameters : %s", str(sys.argv))


def _to_location(loc):
        return {
            'id': loc.id,
            'name': loc.name
        }

try:
    driver = get_connection()
    locations = [_to_location(loc) for loc in driver.list_locations()]
    print(json.dumps(locations))
    exit(0)

except Exception as e:
    logging.error(traceback.format_exc())
